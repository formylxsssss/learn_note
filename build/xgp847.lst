ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"xgp847.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.iic_xgp847_init,"ax",%progbits
  16              		.align	1
  17              		.global	iic_xgp847_init
  18              		.arch armv7-m
  19              		.syntax unified
  20              		.thumb
  21              		.thumb_func
  22              		.fpu softvfp
  24              	iic_xgp847_init:
  25              	.LFB65:
  26              		.file 1 "sensor_drive/xgp847.c"
   1:sensor_drive/xgp847.c **** #include <stddef.h>
   2:sensor_drive/xgp847.c **** #include <stdint.h>
   3:sensor_drive/xgp847.c **** #include <stdlib.h>
   4:sensor_drive/xgp847.c **** #include "stm32f1xx_hal.h"
   5:sensor_drive/xgp847.c **** #include "i2c.h"
   6:sensor_drive/xgp847.c **** #include "SEGGER_RTT.h"
   7:sensor_drive/xgp847.c **** #include "xgp847.h"
   8:sensor_drive/xgp847.c **** uint8_t iic_xgp847_buffer[6];
   9:sensor_drive/xgp847.c **** /**
  10:sensor_drive/xgp847.c ****  * @brief  初始化xgp847传感器
  11:sensor_drive/xgp847.c ****  * @return int
  12:sensor_drive/xgp847.c ****  * @retval 0 成功
  13:sensor_drive/xgp847.c ****  * @retval -1 失败
  14:sensor_drive/xgp847.c ****  */
  15:sensor_drive/xgp847.c **** int iic_xgp847_init(void)
  16:sensor_drive/xgp847.c **** {
  27              		.loc 1 16 1 view -0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 0
  30              		@ frame_needed = 0, uses_anonymous_args = 0
  31 0000 F0B5     		push	{r4, r5, r6, r7, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 20
  34              		.cfi_offset 4, -20
  35              		.cfi_offset 5, -16
  36              		.cfi_offset 6, -12
  37              		.cfi_offset 7, -8
  38              		.cfi_offset 14, -4
  39 0002 85B0     		sub	sp, sp, #20
  40              	.LCFI1:
  41              		.cfi_def_cfa_offset 40
  17:sensor_drive/xgp847.c ****     HAL_StatusTypeDef init_status;
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 2


  42              		.loc 1 17 5 view .LVU1
  18:sensor_drive/xgp847.c ****     init_status = HAL_I2C_Mem_Read(&hi2c1, XPG_847_ADDER, 0xA5, I2C_MEMADD_SIZE_8BIT, iic_xgp847_bu
  43              		.loc 1 18 5 view .LVU2
  44              		.loc 1 18 19 is_stmt 0 view .LVU3
  45 0004 154E     		ldr	r6, .L6
  46 0006 0C27     		movs	r7, #12
  47 0008 0297     		str	r7, [sp, #8]
  48 000a 0124     		movs	r4, #1
  49 000c 0194     		str	r4, [sp, #4]
  50 000e 144D     		ldr	r5, .L6+4
  51 0010 0095     		str	r5, [sp]
  52 0012 2346     		mov	r3, r4
  53 0014 A522     		movs	r2, #165
  54 0016 DA21     		movs	r1, #218
  55 0018 3046     		mov	r0, r6
  56 001a FFF7FEFF 		bl	HAL_I2C_Mem_Read
  57              	.LVL0:
  19:sensor_drive/xgp847.c ****     iic_xgp847_buffer[0] &= 0xfd;
  58              		.loc 1 19 5 is_stmt 1 view .LVU4
  59              		.loc 1 19 26 is_stmt 0 view .LVU5
  60 001e 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
  61 0020 23F00203 		bic	r3, r3, #2
  62 0024 2B70     		strb	r3, [r5]
  20:sensor_drive/xgp847.c ****     init_status = HAL_I2C_Mem_Write(&hi2c1, XPG_847_ADDER, 0xA5, I2C_MEMADD_SIZE_8BIT, iic_xgp847_b
  63              		.loc 1 20 5 is_stmt 1 view .LVU6
  64              		.loc 1 20 19 is_stmt 0 view .LVU7
  65 0026 0297     		str	r7, [sp, #8]
  66 0028 0194     		str	r4, [sp, #4]
  67 002a 0095     		str	r5, [sp]
  68 002c 2346     		mov	r3, r4
  69 002e A522     		movs	r2, #165
  70 0030 DA21     		movs	r1, #218
  71 0032 3046     		mov	r0, r6
  72 0034 FFF7FEFF 		bl	HAL_I2C_Mem_Write
  73              	.LVL1:
  21:sensor_drive/xgp847.c ****     iic_xgp847_buffer[0] = 0x0A;
  74              		.loc 1 21 5 is_stmt 1 view .LVU8
  75              		.loc 1 21 26 is_stmt 0 view .LVU9
  76 0038 0A23     		movs	r3, #10
  77 003a 2B70     		strb	r3, [r5]
  22:sensor_drive/xgp847.c ****     init_status = HAL_I2C_Mem_Write(&hi2c1, XPG_847_ADDER, 0x30, I2C_MEMADD_SIZE_8BIT, iic_xgp847_b
  78              		.loc 1 22 5 is_stmt 1 view .LVU10
  79              		.loc 1 22 19 is_stmt 0 view .LVU11
  80 003c 0297     		str	r7, [sp, #8]
  81 003e 0194     		str	r4, [sp, #4]
  82 0040 0095     		str	r5, [sp]
  83 0042 2346     		mov	r3, r4
  84 0044 3022     		movs	r2, #48
  85 0046 DA21     		movs	r1, #218
  86 0048 3046     		mov	r0, r6
  87 004a FFF7FEFF 		bl	HAL_I2C_Mem_Write
  88              	.LVL2:
  23:sensor_drive/xgp847.c ****     if (init_status == HAL_OK)
  89              		.loc 1 23 5 is_stmt 1 view .LVU12
  90              		.loc 1 23 8 is_stmt 0 view .LVU13
  91 004e 08B9     		cbnz	r0, .L5
  92              	.LVL3:
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 3


  93              	.L1:
  24:sensor_drive/xgp847.c ****     {
  25:sensor_drive/xgp847.c ****         return 0;
  26:sensor_drive/xgp847.c ****     }
  27:sensor_drive/xgp847.c ****     else
  28:sensor_drive/xgp847.c ****     {
  29:sensor_drive/xgp847.c ****         return -1;
  30:sensor_drive/xgp847.c ****     }
  31:sensor_drive/xgp847.c **** }
  94              		.loc 1 31 1 view .LVU14
  95 0050 05B0     		add	sp, sp, #20
  96              	.LCFI2:
  97              		.cfi_remember_state
  98              		.cfi_def_cfa_offset 20
  99              		@ sp needed
 100 0052 F0BD     		pop	{r4, r5, r6, r7, pc}
 101              	.LVL4:
 102              	.L5:
 103              	.LCFI3:
 104              		.cfi_restore_state
  29:sensor_drive/xgp847.c ****     }
 105              		.loc 1 29 16 view .LVU15
 106 0054 4FF0FF30 		mov	r0, #-1
 107              	.LVL5:
  29:sensor_drive/xgp847.c ****     }
 108              		.loc 1 29 16 view .LVU16
 109 0058 FAE7     		b	.L1
 110              	.L7:
 111 005a 00BF     		.align	2
 112              	.L6:
 113 005c 00000000 		.word	hi2c1
 114 0060 00000000 		.word	iic_xgp847_buffer
 115              		.cfi_endproc
 116              	.LFE65:
 118              		.global	__aeabi_i2f
 119              		.global	__aeabi_fmul
 120              		.section	.text.iic_xgp847_get_data,"ax",%progbits
 121              		.align	1
 122              		.global	iic_xgp847_get_data
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 126              		.fpu softvfp
 128              	iic_xgp847_get_data:
 129              	.LVL6:
 130              	.LFB66:
  32:sensor_drive/xgp847.c **** /**
  33:sensor_drive/xgp847.c ****  * @brief  获取xgp847数据
  34:sensor_drive/xgp847.c ****  * 
  35:sensor_drive/xgp847.c ****  * @param data  获取的数据 为float型
  36:sensor_drive/xgp847.c ****  * @return int 
  37:sensor_drive/xgp847.c ****  * @retval 0 成功
  38:sensor_drive/xgp847.c ****  * @retval -1 失败
  39:sensor_drive/xgp847.c ****  */
  40:sensor_drive/xgp847.c **** int iic_xgp847_get_data(float *data)
  41:sensor_drive/xgp847.c **** {
 131              		.loc 1 41 1 is_stmt 1 view -0
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 4


 132              		.cfi_startproc
 133              		@ args = 0, pretend = 0, frame = 0
 134              		@ frame_needed = 0, uses_anonymous_args = 0
 135              		.loc 1 41 1 is_stmt 0 view .LVU18
 136 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 137              	.LCFI4:
 138              		.cfi_def_cfa_offset 20
 139              		.cfi_offset 4, -20
 140              		.cfi_offset 5, -16
 141              		.cfi_offset 6, -12
 142              		.cfi_offset 7, -8
 143              		.cfi_offset 14, -4
 144 0002 85B0     		sub	sp, sp, #20
 145              	.LCFI5:
 146              		.cfi_def_cfa_offset 40
 147 0004 0546     		mov	r5, r0
  42:sensor_drive/xgp847.c ****     HAL_StatusTypeDef get_data_status;
 148              		.loc 1 42 5 is_stmt 1 view .LVU19
  43:sensor_drive/xgp847.c ****     get_data_status = HAL_I2C_Mem_Read(&hi2c1, XPG_847_ADDER, 0x06, I2C_MEMADD_SIZE_8BIT, iic_xgp84
 149              		.loc 1 43 5 view .LVU20
 150              		.loc 1 43 23 is_stmt 0 view .LVU21
 151 0006 164E     		ldr	r6, .L13
 152 0008 0C27     		movs	r7, #12
 153 000a 0297     		str	r7, [sp, #8]
 154 000c 0323     		movs	r3, #3
 155 000e 0193     		str	r3, [sp, #4]
 156 0010 144C     		ldr	r4, .L13+4
 157 0012 0094     		str	r4, [sp]
 158 0014 0123     		movs	r3, #1
 159 0016 0622     		movs	r2, #6
 160 0018 DA21     		movs	r1, #218
 161 001a 3046     		mov	r0, r6
 162              	.LVL7:
 163              		.loc 1 43 23 view .LVU22
 164 001c FFF7FEFF 		bl	HAL_I2C_Mem_Read
 165              	.LVL8:
  44:sensor_drive/xgp847.c ****     float xgp847_value;
 166              		.loc 1 44 5 is_stmt 1 view .LVU23
  45:sensor_drive/xgp847.c ****     xgp847_value = iic_xgp847_buffer[0] * 65536 + iic_xgp847_buffer[1] * 256 + iic_xgp847_buffer[2]
 167              		.loc 1 45 5 view .LVU24
 168              		.loc 1 45 37 is_stmt 0 view .LVU25
 169 0020 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 170              		.loc 1 45 68 view .LVU26
 171 0022 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
 172              		.loc 1 45 49 view .LVU27
 173 0024 03EB0023 		add	r3, r3, r0, lsl #8
 174              		.loc 1 45 97 view .LVU28
 175 0028 A078     		ldrb	r0, [r4, #2]	@ zero_extendqisi2
 176              		.loc 1 45 18 view .LVU29
 177 002a 00EB0320 		add	r0, r0, r3, lsl #8
 178 002e FFF7FEFF 		bl	__aeabi_i2f
 179              	.LVL9:
  46:sensor_drive/xgp847.c ****     xgp847_value = (xgp847_value / 8388608) * 100;
 180              		.loc 1 46 5 is_stmt 1 view .LVU30
 181              		.loc 1 46 34 is_stmt 0 view .LVU31
 182 0032 4FF05051 		mov	r1, #872415232
 183 0036 FFF7FEFF 		bl	__aeabi_fmul
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 5


 184              	.LVL10:
 185              		.loc 1 46 18 view .LVU32
 186 003a 0B49     		ldr	r1, .L13+8
 187 003c FFF7FEFF 		bl	__aeabi_fmul
 188              	.LVL11:
  47:sensor_drive/xgp847.c ****     *data = xgp847_value;
 189              		.loc 1 47 5 is_stmt 1 view .LVU33
 190              		.loc 1 47 11 is_stmt 0 view .LVU34
 191 0040 2860     		str	r0, [r5]	@ float
  48:sensor_drive/xgp847.c ****     get_data_status = HAL_I2C_Mem_Write(&hi2c1, XPG_847_ADDER, 0x30, I2C_MEMADD_SIZE_8BIT, iic_xgp8
 192              		.loc 1 48 5 is_stmt 1 view .LVU35
 193              		.loc 1 48 23 is_stmt 0 view .LVU36
 194 0042 0297     		str	r7, [sp, #8]
 195 0044 0123     		movs	r3, #1
 196 0046 0193     		str	r3, [sp, #4]
 197 0048 0094     		str	r4, [sp]
 198 004a 3022     		movs	r2, #48
 199 004c DA21     		movs	r1, #218
 200 004e 3046     		mov	r0, r6
 201              	.LVL12:
 202              		.loc 1 48 23 view .LVU37
 203 0050 FFF7FEFF 		bl	HAL_I2C_Mem_Write
 204              	.LVL13:
  49:sensor_drive/xgp847.c ****     if (get_data_status == HAL_OK)
 205              		.loc 1 49 5 is_stmt 1 view .LVU38
 206              		.loc 1 49 8 is_stmt 0 view .LVU39
 207 0054 08B9     		cbnz	r0, .L12
 208              	.LVL14:
 209              	.L8:
  50:sensor_drive/xgp847.c ****     {
  51:sensor_drive/xgp847.c ****         return 0;
  52:sensor_drive/xgp847.c ****     }
  53:sensor_drive/xgp847.c ****     else
  54:sensor_drive/xgp847.c ****     {
  55:sensor_drive/xgp847.c ****         return -1;
  56:sensor_drive/xgp847.c ****     }
  57:sensor_drive/xgp847.c **** }...
 210              		.loc 1 57 1 view .LVU40
 211 0056 05B0     		add	sp, sp, #20
 212              	.LCFI6:
 213              		.cfi_remember_state
 214              		.cfi_def_cfa_offset 20
 215              		@ sp needed
 216 0058 F0BD     		pop	{r4, r5, r6, r7, pc}
 217              	.LVL15:
 218              	.L12:
 219              	.LCFI7:
 220              		.cfi_restore_state
  55:sensor_drive/xgp847.c ****         return -1;
 221              		.loc 1 55 16 view .LVU41
 222 005a 4FF0FF30 		mov	r0, #-1
 223              	.LVL16:
  55:sensor_drive/xgp847.c ****         return -1;
 224              		.loc 1 55 16 view .LVU42
 225 005e FAE7     		b	.L8
 226              	.L14:
 227              		.align	2
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 6


 228              	.L13:
 229 0060 00000000 		.word	hi2c1
 230 0064 00000000 		.word	iic_xgp847_buffer
 231 0068 0000C842 		.word	1120403456
 232              		.cfi_endproc
 233              	.LFE66:
 235              		.comm	iic_xgp847_buffer,6,4
 236              		.text
 237              	.Letext0:
 238              		.file 2 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/machine/_default_types.h"
 239              		.file 3 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_stdint.h"
 240              		.file 4 "/opt/gcc-arm-none-eabi-9-2020-q2-update/lib/gcc/arm-none-eabi/9.3.1/include/stddef.h"
 241              		.file 5 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/_types.h"
 242              		.file 6 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/reent.h"
 243              		.file 7 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/sys/lock.h"
 244              		.file 8 "/opt/gcc-arm-none-eabi-9-2020-q2-update/arm-none-eabi/include/stdlib.h"
 245              		.file 9 "Drivers/CMSIS/Include/core_cm3.h"
 246              		.file 10 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 247              		.file 11 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 248              		.file 12 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 249              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 250              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_i2c.h"
 251              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 252              		.file 16 "Core/Inc/i2c.h"
ARM GAS  /var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s 			page 7


DEFINED SYMBOLS
                            *ABS*:0000000000000000 xgp847.c
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:16     .text.iic_xgp847_init:0000000000000000 $t
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:24     .text.iic_xgp847_init:0000000000000000 iic_xgp847_init
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:113    .text.iic_xgp847_init:000000000000005c $d
                            *COM*:0000000000000006 iic_xgp847_buffer
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:121    .text.iic_xgp847_get_data:0000000000000000 $t
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:128    .text.iic_xgp847_get_data:0000000000000000 iic_xgp847_get_data
/var/folders/mx/xtmnkh9x46d2ktwbhj73try40000gn/T//ccWuaufs.s:229    .text.iic_xgp847_get_data:0000000000000060 $d

UNDEFINED SYMBOLS
HAL_I2C_Mem_Read
HAL_I2C_Mem_Write
hi2c1
__aeabi_i2f
__aeabi_fmul
